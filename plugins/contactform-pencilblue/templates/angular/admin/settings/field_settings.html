<script type="text/javascript">

    var module = angular.module('pencilblueApp', [])
    
    module.service('SettingService', ['$http', function($http){
        this.save = function(settings){
            var url = '/plugin/contact/api/settings/fields';
            return $http.post(url, settings);
        };
    }]);

    module.controller('PencilBlueController', ['$scope', 'SettingService', function($scope, service){
        
        ^angular_objects^

        console.log($scope.settings);

        $scope.save = function(){
            $scope.saving = true;
            service.save($scope.settings)
            .success(function(result) {
                $scope.successMessage = result.message;
                $scope.saving = false;
            })
            .error(function(error, status) {
                $scope.errorMessage = error.message;
                $scope.saving = false;
            });
        };

        $scope.delete = function(definition){
            var definitions = $scope.settings.definitions;
            var index = definitions.indexOf(definition);
            if(index > -1){ definitions.splice(index, 1); }
        };

    }]);

</script>
